# =============================================================================
# TRINO (Unified SQL Query Engine)
# =============================================================================
# Start with: docker-compose up -d
# Stop with:  docker-compose down
# Web UI:     http://localhost:8090
# Default credentials: admin
#
# ⚠️  REQUIRES: Hive Metastore (start hive first!)
# =============================================================================

networks:
  bigdata-net:
    name: bigdata-net
    external: true

services:
  trino:
    image: trinodb/trino:latest
    container_name: trino
    ports: ["8090:8080"]
    networks: [bigdata-net]
    entrypoint:
      - /bin/sh
      - -c
      - |
        mkdir -p /etc/trino/catalog
        echo "connector.name=hive" > /etc/trino/catalog/hive.properties
        echo "hive.metastore.uri=thrift://hive-metastore:9083" >> /etc/trino/catalog/hive.properties
        echo "hive.security=allow-all" >> /etc/trino/catalog/hive.properties
        # Start Trino
        /usr/lib/trino/bin/run-trino
    depends_on: [hive-metastore]
